<polymer-element name="ui-stats-timeline" attributes="data src limit label
   groupBy groupByFunction reduction units dateProperty valueProperty datePattern
   smooth type valueProperties method trendline transform absoluteChange showChange since until
   invertChange includePartialGroups onLoad
   function
   ">
  <link rel="import" href="../google-chart/google-chart.html">

  <template>
    <link rel="stylesheet" type="text/css" href="./ui-stats-timeline.less">

    <h2>{{label}}</h2>
    <div class="timeline">

      <div class="data" hidden?="{{reduction == 'none'}}">
        <div class="loading" hidden?="{{!loading}}">Loading...</div>
        <div class="number" hidden?="{{loading}}">
          <template if="{{units == '%'}}">{{value | percentage}}</template>
          <template if="{{units != '%'}}">{{value | decimalNumber}}{{units}}</template>
        </div>

        <div class="{{ {change: true, increase: improving, decrease: !improving} | tokenList }}" hidden?="{{loading || !showChange}}">
          <template if="{{change > 0}}">▲</template>
          <template if="{{change < 0}}">▼</template>
          <template if="{{absoluteChange}}">{{change | absv | decimalNumber }}{{units}}</template>
          <template if="{{!absoluteChange}}">{{change | absv | percentage }}</template>
          {{groupBy}} over {{groupBy}}
        </div>

        <div class="{{ {change: true, increase: totalImproving, decrease: !totalImproving} | tokenList }}" hidden?="{{loading || !showChange}}">
          <template if="{{totalChange > 0}}">▲</template>
          <template if="{{totalChange < 0}}">▼</template>
          <template if="{{absoluteChange}}">{{totalChange | absv | decimalNumber }}{{units}}</template>
          <template if="{{!absoluteChange}}">{{totalChange | absv | percentage }}</template>
          overall
        </div>
        
      </div>

      <div class="graph">
        <div class="graph-container">
          <google-chart id="chart">
          </google-chart>
      </div>
    </div>

  </template>

  <script src="./ui-stats-timeline.litcoffee"></script>
</polymer-element>
  
